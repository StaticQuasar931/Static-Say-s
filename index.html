<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Static Says - by StaticQuasar931</title>

  <!-- SEO & Indexing -->
  <meta name="description" content="Play Static Says – the fast-paced memory and reaction game by StaticQuasar931. Click or hover on shapes, move your cursor to quadrants, and beat your high score!">
  <meta name="keywords" content="Static Says, simon says, shapes, color game, reaction game, google sites, memory game, staticquasar931">

  <style>
    /* BASIC RESET */
    * {
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    html, body {
      width: 100%; 
      height: 100%; 
      overflow: hidden;
      background: #202020; 
      color: #fff;
    }
    body {
      display: flex; 
      flex-direction: column; 
      align-items: center;
      justify-content: center;
      position: relative;
    }
    a { 
      color: #0af; 
      text-decoration: none; 
    }

    /* STATIC MENU (top-left) */
    #staticMenu {
      position: fixed; 
      top: 10px; 
      left: 10px;
      background: #222; 
      color: #fff;
      padding: 10px 15px; 
      border-radius: 8px;
      z-index: 9999;
      box-shadow: 0 0 8px rgba(0,0,0,0.6);
      animation: twinkle 2s infinite;
    }
    @keyframes twinkle {
      0%, 100% { box-shadow: 0 0 8px rgba(0,255,255,0.7); }
      50% { box-shadow: 0 0 4px rgba(0,255,255,0.2); }
    }
    #closeMenu {
      background: #444; 
      color: #fff; 
      border: none; 
      cursor: pointer;
      padding: 4px 8px; 
      margin-left: 10px;
      border-radius: 4px;
    }
    #closeMenu:hover {
      background: #666;
    }

    /* SETTINGS BUTTON (top-right) */
    #settingsButton {
      position: fixed; 
      top: 10px; 
      right: 10px;
      background: #444; 
      color: #fff;
      border: 1px solid #666;
      padding: 12px 20px;  
      font-size: 1.1rem;
      border-radius: 6px;
      cursor: pointer;
      z-index: 9999;
      transition: transform 0.2s, background 0.2s;
    }
    #settingsButton:hover { 
      transform: scale(1.05);
      background: #333; 
    }

    /* OVERLAY BASE STYLE */
    .overlay {
      position: fixed; 
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center; 
      justify-content: center;
      z-index: 9980;
    }
    .overlayContent {
      background: #222; 
      border-radius: 10px;
      text-align: center;
      position: relative;
    }
    .overlayContent button:hover {
      transform: scale(1.05);
      background: #777;
    }
    .overlay.clickOutsideClose { cursor: pointer; }
    .overlayContent { cursor: auto; }

    /* SETTINGS OVERLAY */
    #settingsOverlay {
      display: none;
      z-index: 9981;
    }
    #settingsBox {
      padding: 60px 90px;
      width: 600px;
      color: #fff;
    }
    #settingsBox h3 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    .settingsRow { 
      margin: 30px 0; 
      font-size: 1.3rem; 
    }
    #closeSettingsBtn, #openShareOverlayBtn {
      background: #555; 
      color: #fff; 
      border: none;
      padding: 12px 20px;
      font-size: 1.2rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px;
      transition: background 0.2s, transform 0.2s;
    }

    /* SHARE OVERLAY */
    #shareOverlay {
      display: none;
      z-index: 9990;
    }
    #shareBox {
      padding: 40px 60px;
      width: 400px;
      color: #fff;
    }
    .shareLinks {
      display: flex; 
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }
    .shareLinks a {
      background: #555;
      color: #fff;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 6px;
      transition: background 0.2s, transform 0.2s;
    }
    .shareLinks a:hover {
      background: #777;
      transform: scale(1.03);
    }
    #closeShareBtn {
      margin-top: 10px;
      background: #444; 
      color: #fff; 
      border: none;
      padding: 10px 20px; 
      border-radius: 6px; 
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
    }

    /* QR CODE (bottom-left) */
    #qrContainer {
      position: fixed; 
      bottom: 10px; 
      left: 10px;
      z-index: 9979;
    }
    #qrContainer img {
      width: 140px; 
      height: 140px;
      border: 2px solid #fff;
      border-radius: 8px;
      transition: transform 0.2s;
    }
    #qrContainer img:hover {
      transform: scale(1.05);
    }

    /* GLOBAL STATS (bottom-right) */
    #statsContainer {
      position: fixed; 
      bottom: 10px; 
      right: 10px;
      background: rgba(0,0,0,0.6); 
      color: #fff;
      padding: 16px 22px; 
      border-radius: 8px;
      font-size: 1.2rem; 
      line-height: 1.8em;
      z-index: 9979;
      transition: transform 0.2s;
      cursor: pointer;
    }
    #statsContainer:hover {
      transform: scale(1.02);
    }
    #statsContainer strong { font-size: 1.2rem; }

    /* MAIN MENU */
    #mainMenu {
      width: 100%; 
      height: 100%; 
      display: flex; 
      flex-direction: column;
      align-items: center; 
      justify-content: center;
    }
    #gameTitle {
      font-size: 4rem; 
      margin-bottom: 30px; 
      text-align: center;
      font-weight: bold;
    }
    #mapSelectContainer {
      display: flex; 
      gap: 40px; 
      margin: 30px 0;
    }
    .mapChoice {
      width: 220px; 
      height: 130px;
      background: #333; 
      color: #fff;
      display: flex; 
      justify-content: center; 
      align-items: center;
      cursor: pointer; 
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(255,255,255,0.1);
      transition: transform 0.2s, background 0.2s;
      text-align: center;
      font-size: 1.4rem;
    }
    .mapChoice:hover {
      transform: scale(1.08);
      background: #444;
    }
    .mapDisabled {
      background: #555 !important;
      cursor: not-allowed;
      opacity: 0.5;
    }

    /* DIFFICULTY MENU */
    #difficultyMenu {
      display: none;
      width: 100%; 
      height: 100%;
      flex-direction: column; 
      align-items: center; 
      justify-content: center;
      position: relative;
    }
    #difficultyTitle {
      font-size: 3rem; 
      margin-bottom: 20px;
      text-align: center;
    }
    #difficultyNote {
      margin-bottom: 30px; 
      text-align: center;
      font-size: 1.3rem;
      line-height: 1.4em;
    }
    #difficultySelectContainer {
      display: flex; 
      flex-direction: column; 
      gap: 30px;
      text-align: center;
    }
    .difficultyChoice {
      width: 300px; 
      padding: 16px 0;
      margin: 0 auto;
      border-radius: 8px; 
      color: #fff;
      font-weight: bold; 
      cursor: pointer; 
      font-size: 1.6rem;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .difficultyChoice:hover {
      transform: scale(1.08);
      box-shadow: 0 0 12px rgba(255,255,255,0.2);
    }
    #easyBtn { background: orange; }
    #mediumBtn { background: red; }
    #hardcoreBtn {
      background: #900;
    }
    #hardcoreBtn:hover {
      animation: hardcoreShake 0.3s infinite;
    }
    @keyframes hardcoreShake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      20% { transform: translate(-2px, -1px) rotate(-2deg); }
      40% { transform: translate(2px, 0px) rotate(1deg); }
      60% { transform: translate(-2px, 2px) rotate(2deg); }
      80% { transform: translate(1px, -2px) rotate(-1deg); }
      100% { transform: translate(1px, 1px) rotate(0deg); }
    }

    /* RULES OVERLAY */
    #rulesOverlay {
      display: none;
      position: fixed; 
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0,0,0,0.7);
      justify-content: center; 
      align-items: center;
      z-index: 2000;
      cursor: pointer;
    }
    #rulesBox {
      background: #222; 
      padding: 20px 30px;
      border-radius: 10px; 
      max-width: 600px; 
      text-align: center;
      cursor: auto;
    }
    #rulesBox h2 { margin-bottom: 10px; }
    #rulesBox p {
      margin: 10px 0; 
      line-height: 1.4em; 
      font-size: 1rem;
    }
    #startGameBtn {
      margin-top: 15px; 
      padding: 12px 24px;
      font-size: 1.2rem; 
      border: none; 
      border-radius: 8px;
      cursor: pointer; 
      color: #fff;
      background: #555;
      transition: background 0.2s, transform 0.2s;
    }

    /* GAME AREA */
    #gameArea {
      display: none; 
      position: relative;
      width: 100%; 
      height: 100%;
      background: radial-gradient(circle, #c3e6c3, #66cc66);
      overflow: hidden;
    }

    /* 0.1s FLASH for life loss */
    .lifeLossFlash {
      animation: lifeLossAnim 0.1s;
    }
    @keyframes lifeLossAnim {
      0% { background-color: rgba(255,0,0,0.8); }
      100% { background-color: rgba(255,0,0,0); }
    }

    /* Quadrant lines */
    #verticalLine, #horizontalLine {
      position: absolute;
      background: rgba(0,0,0,0.5);
      z-index: 1;
    }
    #verticalLine {
      top: 0; bottom: 0; 
      width: 2px; left: 50%;
    }
    #horizontalLine {
      left: 0; right: 0;
      height: 2px; top: 50%;
    }

    /* Shapes (some big or small) */
    .map1Shape {
      position: absolute;
      display: flex; 
      align-items: center; 
      justify-content: center;
      font-weight: bold; 
      font-size: 1rem;
      cursor: pointer; 
      user-select: none;
      text-align: center;
      border: 2px solid #666;
      transition: transform 0.2s;
      z-index: 2; 
    }
    .map1Shape:hover {
      transform: scale(1.1);
    }
    .square  { width: 60px;  height: 60px;  border-radius: 4px; }
    .circle  { width: 60px;  height: 60px;  border-radius: 50%; }
    .bigCircle { width: 80px; height: 80px; border-radius: 50%; font-size:1.2rem;}
    .smallCircle { width: 40px; height: 40px; border-radius: 50%; font-size:0.8rem;}

    /* Example positions for 20 shapes */
    #shape1  { top: 80px; left: 50px;   background: red;       color: #fff; }
    #shape2  { top: 80px; right: 70px;  background: blue;      color: #fff; }
    #shape3  { bottom: 70px; left: 50px;  background: black;     color: #fff; }
    #shape4  { bottom: 70px; right: 70px; background: orange;    color: #000; }
    #shape5  { top: 200px; left: 25%;    background: pink;      color: #000; }
    #shape6  { top: 200px; left: 60%;    background: purple;    color: #fff; }
    #shape7  { top: 300px; left: 15%;    background: white;     color: #000; }
    #shape8  { top: 300px; left: 45%;    background: yellow;    color: #000; }
    #shape9  { top: 300px; left: 75%;    background: black;     color: #fff; }
    #shape10 { bottom: 150px; left: 20%; background: red;       color: #fff; }
    #shape11 { bottom: 150px; left: 50%; background: pink;      color: #000; }
    #shape12 { bottom: 150px; left: 80%; background: white;     color: #000; }
    #shape13 { top: 120px; left: 40%;    background: black;     color: #fff; }
    #shape14 { top: 120px; left: 55%;    background: purple;    color: #fff; }
    #shape15 { top: 400px; left: 60%;    background: white;     color: #000; }
    #shape16 { top: 350px; left: 35%;    background: pink;      color: #000; }
    #shape17 { top: 100px; right: 20%;   background: red;       color: #fff; }
    #shape18 { bottom: 200px; left: 30%; background: orange;    color: #000; }
    #shape19 { bottom: 250px; right: 30%; background: blue;     color: #fff; }
    #shape20 { top: 250px; left: 5%;     background: black;     color: #fff; }

    /* HUD (timer + command) */
    #inGameHUD {
      position: absolute; 
      top: 30px; 
      width: 100%;
      display: flex; 
      flex-direction: row;
      align-items: flex-start;
      justify-content: center;
      pointer-events: none; 
      gap: 20px;
      z-index: 99;
    }
    #timeLeft {
      font-size: 2rem; 
      font-weight: bold;
      background: rgba(0,0,0,0.5);
      padding: 10px 15px; 
      border-radius: 8px;
      min-width: 120px;
      text-align: center;
      pointer-events: none;
    }
    #commandText {
      font-size: 1.5rem;
      line-height: 1.4em;
      background: rgba(0,0,0,0.5);
      padding: 10px 15px; 
      border-radius: 8px;
      pointer-events: none;
      max-width: 600px;
    }

    /* Move stats slightly lower but above middle line */
    #scoreHUD {
      position: absolute; 
      top: 250px;  /* ADJUSTED */
      left: 10px;
      background: rgba(0,0,0,0.5); 
      border-radius: 8px;
      padding: 12px 20px;
      font-size: 1.2rem;
      line-height: 1.6em;
      pointer-events: none;
      z-index: 99;
    }
    .label { font-weight: bold; }

    /* "No Action" button (unchanged from last version) */
    #noActionBtn {
      position: absolute; 
      bottom: 20px; 
      right: 20px;
      background: #555; 
      color: #fff; 
      border: none; 
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      z-index: 99;
      display: none; /* Shown each round */
      transition: background 0.2s, transform 0.2s;
    }
    #noActionBtn:hover {
      background: #777;
      transform: scale(1.05);
    }

    /* PAUSE OVERLAY */
    #pauseOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center; 
      align-items: center;
      z-index: 3000;
      text-align: center;
      cursor: pointer;
    }
    #pauseBox {
      background: #222; 
      padding: 40px 60px; 
      border-radius: 10px;
      font-size: 2rem;
      cursor: auto;
      position: relative;
    }
    #pauseEndGameBtn {
      background: #444; 
      color: #fff; 
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
      font-size: 1rem;
      transition: background 0.2s, transform 0.2s;
    }
    #pauseEndGameBtn:hover {
      background: #666;
      transform: scale(1.05);
    }
    #doubleConfirmOverlay {
      position: absolute;
      top: 0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center; 
      align-items: center;
      flex-direction: column;
    }
    #doubleConfirmOverlay button {
      background: #666; 
      color: #fff; 
      border: none;
      padding: 10px 20px; 
      border-radius: 6px; 
      margin: 10px;
      font-size: 1rem;
    }

    /* GAME OVER OVERLAY */
    #gameOverOverlay {
      display: none; 
      position: fixed; 
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center; 
      align-items: center;
      z-index: 4000;
      text-align: center;
    }
    #gameOverBox {
      background: #222; 
      padding: 30px; 
      border-radius: 10px; 
      width: 350px;
    }
    #gameOverBox h2 { margin-bottom: 15px; }
    #gameOverBox button {
      background: #444; 
      color: #fff; 
      border: none;
      padding: 12px 20px; 
      cursor: pointer; 
      border-radius: 8px;
      margin: 10px;
      font-size: 1rem;
      transition: transform 0.2s, background 0.2s;
    }
  </style>
</head>
<body>
  <!-- AUDIO -->
  <audio id="sndLoseLife" preload="auto">
    <source src="data:audio/wav;base64,UklGRmIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU0AAA==" type="audio/wav">
  </audio>
  <audio id="sndHardcoreSelect" preload="auto">
    <source src="data:audio/wav;base64,UklGRmIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU0AAA==" type="audio/wav">
  </audio>
  <audio id="sndHighScore" preload="auto">
    <source src="data:audio/wav;base64,UklGRmIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU0AAA==" type="audio/wav">
  </audio>

  <!-- STATIC MENU (top-left) -->
  <div id="staticMenu">
    <a href="https://sites.google.com/view/staticquasar931" target="_blank">Main Static Site</a>
    <button id="closeMenu">✖</button>
  </div>

  <!-- SETTINGS BUTTON (top-right) -->
  <button id="settingsButton">Settings</button>

  <!-- SETTINGS OVERLAY -->
  <div id="settingsOverlay" class="overlay clickOutsideClose">
    <div id="settingsBox" class="overlayContent">
      <h3>Settings</h3>
      <div class="settingsRow">
        <label><input type="checkbox" id="colorBlindToggle"> Color-Blind Mode</label>
      </div>
      <div class="settingsRow">
        <strong>Color Examples:</strong><br/>
        <span style="color:red;">Red</span>, 
        <span style="color:blue;">Blue</span>, 
        <span style="color:orange;">Orange</span>, 
        <span style="color:purple;">Purple</span>, 
        <span style="color:pink;">Pink</span>, 
        <span style="color:black;">Black</span>, 
        <span style="color:white; background:#555;">White</span>, 
        <span style="color:yellow;">Yellow</span>
      </div>
      <div class="settingsRow">
        <label for="soundSlider">Sound Volume:</label><br/>
        <input type="range" id="soundSlider" min="0" max="100" value="50" />
      </div>
      <div class="settingsRow">
        <a 
          href="https://docs.google.com/forms/d/e/1FAIpQLSfFiegPH6GsWIWERzfbtptJW2GMk4exkrTQsdqlR2-2oj83zA/viewform?usp=sf_link" 
          target="_blank"
        >Leave feedback via this Google Form</a>
      </div>
      <div class="settingsRow">
        <button id="openShareOverlayBtn">Share This Game</button>
      </div>
      <div class="settingsRow">
        <button id="closeSettingsBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- SHARE OVERLAY -->
  <div id="shareOverlay" class="overlay clickOutsideClose">
    <div id="shareBox" class="overlayContent">
      <h2>Share Static Says</h2>
      <div class="shareLinks">
        <a id="shareTwitter" href="#" target="_blank">Share on Twitter</a>
        <a id="shareFacebook" href="#" target="_blank">Share on Facebook</a>
        <a id="shareReddit" href="#" target="_blank">Share on Reddit</a>
        <a id="copyLink" href="#">Copy Game Link</a>
      </div>
      <button id="closeShareBtn">Close</button>
    </div>
  </div>

  <!-- QR CODE (bottom-left) -->
  <div id="qrContainer">
    <a href="https://sites.google.com/view/staticquasar931" target="_blank">
      <img 
        src="https://res.cloudinary.com/dcsrqennd/image/upload/v1733694622/frame_1_vmv9y3.png" 
        alt="QR Code to Static's Website" 
      />
    </a>
  </div>

  <!-- GLOBAL STATS (bottom-right) -->
  <div id="statsContainer">
    <strong>Global Stats</strong><br/>
    Total Rounds: <span id="totalRoundsSpan">0</span><br/><br/>
    <strong>Easy</strong> – Rounds: <span id="easyRoundsSpan">0</span>, High: <span id="easyHighSpan">0</span><br/>
    <strong>Medium</strong> – Rounds: <span id="mediumRoundsSpan">0</span>, High: <span id="mediumHighSpan">0</span><br/>
    <strong>Hardcore</strong> – Rounds: <span id="hardcoreRoundsSpan">0</span>, High: <span id="hardcoreHighSpan">0</span>
  </div>

  <!-- MAIN MENU -->
  <div id="mainMenu">
    <div id="gameTitle">🌀 Static Says</div>
    <div id="mapSelectContainer">
      <!-- Map 1 (Enabled) -->
      <div class="mapChoice" id="map1Btn">
        <span>Map 1</span>
      </div>
      <!-- Map 2 (Coming Soon) -->
      <div class="mapChoice mapDisabled" id="map2Btn">
        <span>Map 2 (Coming Soon)</span>
      </div>
      <!-- Map 3 (Coming Soon) -->
      <div class="mapChoice mapDisabled" id="map3Btn">
        <span>Map 3 (Coming Soon)</span>
      </div>
    </div>
  </div>

  <!-- DIFFICULTY MENU -->
  <div id="difficultyMenu">
    <div id="difficultyTitle">Choose Difficulty</div>
    <div id="difficultyNote">
      <strong>Easy:</strong> 4 lives, slower speed<br/>
      <strong>Medium:</strong> 2 lives, moderate speed<br/>
      <strong>Hardcore:</strong> 1 life, fastest speed
    </div>
    <div id="difficultySelectContainer">
      <div class="difficultyChoice" id="easyBtn">EASY</div>
      <div class="difficultyChoice" id="mediumBtn">MEDIUM</div>
      <div class="difficultyChoice" id="hardcoreBtn">HARDCORE</div>
    </div>
  </div>

  <!-- RULES OVERLAY -->
  <div id="rulesOverlay">
    <div id="rulesBox">
      <h2>How to Play "Static Says"</h2>
      <p>
        1) If the command starts with <strong>“Static says...”</strong>, <em>perform it</em>.<br/>
        2) If it does NOT, <em>do nothing</em>!<br/>
        3) Each correct action = +1 point. Lose a life if you do it wrong.<br/>
        4) Commands can be <em>click</em>, <em>hover</em>, or <em>cursor position</em> in a quadrant.<br/>
        5) Press <strong>ESC</strong> or <strong>SPACE</strong> to pause/unpause.<br/>
        (You can only click to <em>exit</em> pause, not enter it.)
      </p>
      <button id="startGameBtn">Start Game</button>
    </div>
  </div>

  <!-- GAME AREA -->
  <div id="gameArea" tabindex="0">
    <div id="map1Container">
      <!-- quadrant lines -->
      <div id="verticalLine"></div>
      <div id="horizontalLine"></div>
      <!-- shapes -->
      <div class="map1Shape square"   id="shape1">1</div>
      <div class="map1Shape circle"   id="shape2">2</div>
      <div class="map1Shape square"   id="shape3">3</div>
      <div class="map1Shape circle"   id="shape4">4</div>
      <div class="map1Shape square"   id="shape5">5</div>
      <div class="map1Shape circle"   id="shape6">6</div>
      <div class="map1Shape square"   id="shape7">7</div>
      <div class="map1Shape square"   id="shape8">8</div>
      <div class="map1Shape circle"   id="shape9">9</div>
      <div class="map1Shape bigCircle"   id="shape10">10</div>
      <div class="map1Shape circle"   id="shape11">11</div>
      <div class="map1Shape smallCircle" id="shape12">12</div>
      <div class="map1Shape smallCircle" id="shape13">13</div>
      <div class="map1Shape bigCircle"   id="shape14">14</div>
      <div class="map1Shape square"      id="shape15">15</div>
      <div class="map1Shape square"      id="shape16">16</div>
      <div class="map1Shape circle"      id="shape17">17</div>
      <div class="map1Shape circle"      id="shape18">18</div>
      <div class="map1Shape circle"      id="shape19">19</div>
      <div class="map1Shape square"      id="shape20">20</div>
    </div>

    <!-- HUD -->
    <div id="inGameHUD">
      <div id="timeLeft">0s</div>
      <div id="commandText"></div>
    </div>
    <div id="scoreHUD">
      <div><span class="label">Difficulty:</span> <span id="currentDifficulty">-</span></div>
      <div><span class="label">Lives:</span> <span id="livesCount">0</span></div>
      <div><span class="label">Score:</span> <span id="roundScore">0</span></div>
      <div><span class="label">High:</span> <span id="currHighScore">0</span></div>
    </div>

    <!-- "No Action" Button -->
    <button id="noActionBtn">No Action</button>
  </div>

  <!-- PAUSE OVERLAY -->
  <div id="pauseOverlay" class="overlay clickOutsideClose">
    <div id="pauseBox" class="overlayContent">
      <strong>GAME PAUSED</strong><br/>
      <button id="pauseEndGameBtn">End Game</button>
      <div id="doubleConfirmOverlay">
        <span>Are you sure?</span>
        <button id="confirmEndYes">Yes, End Game</button>
        <button id="confirmEndNo">No, Go Back</button>
      </div>
    </div>
  </div>

  <!-- GAME OVER OVERLAY -->
  <div id="gameOverOverlay">
    <div id="gameOverBox">
      <h2>Game Over</h2>
      <p id="gameOverMsg"></p>
      <button id="menuReturnBtn">Return to Main Menu</button>
    </div>
  </div>

  <script>
  /********************************************************
    LOCAL STORAGE & STATS
  *********************************************************/
  let defaultStats = {
    totalRounds: 0,
    easy: { roundsPlayed: 0, highScore: 0 },
    medium: { roundsPlayed: 0, highScore: 0 },
    hardcore: { roundsPlayed: 0, highScore: 0 }
  };
  let gameStats = JSON.parse(localStorage.getItem('staticSaysStats')) || defaultStats;

  function saveStatsToLocal() {
    localStorage.setItem('staticSaysStats', JSON.stringify(gameStats));
  }

  function updateStatsUI() {
    document.getElementById('totalRoundsSpan').textContent = gameStats.totalRounds;
    document.getElementById('easyRoundsSpan').textContent = gameStats.easy.roundsPlayed;
    document.getElementById('easyHighSpan').textContent = gameStats.easy.highScore;
    document.getElementById('mediumRoundsSpan').textContent = gameStats.medium.roundsPlayed;
    document.getElementById('mediumHighSpan').textContent = gameStats.medium.highScore;
    document.getElementById('hardcoreRoundsSpan').textContent = gameStats.hardcore.roundsPlayed;
    document.getElementById('hardcoreHighSpan').textContent = gameStats.hardcore.highScore;
  }
  updateStatsUI();

  /********************************************************
    DOM ELEMENTS
  *********************************************************/
  const mainMenu             = document.getElementById('mainMenu');
  const map1Btn              = document.getElementById('map1Btn');
  const difficultyMenu       = document.getElementById('difficultyMenu');
  const easyBtn              = document.getElementById('easyBtn');
  const mediumBtn            = document.getElementById('mediumBtn');
  const hardcoreBtn          = document.getElementById('hardcoreBtn');
  const rulesOverlay         = document.getElementById('rulesOverlay');
  const startGameBtn         = document.getElementById('startGameBtn');
  const gameArea             = document.getElementById('gameArea');
  const inGameHUD            = document.getElementById('inGameHUD');
  const commandText          = document.getElementById('commandText');
  const timeLeftEl           = document.getElementById('timeLeft');
  const livesCountEl         = document.getElementById('livesCount');
  const roundScoreEl         = document.getElementById('roundScore');
  const currHighScoreEl      = document.getElementById('currHighScore');
  const currentDifficultyEl  = document.getElementById('currentDifficulty');
  const scoreHUD             = document.getElementById('scoreHUD');
  const noActionBtn          = document.getElementById('noActionBtn');
  const gameOverOverlay      = document.getElementById('gameOverOverlay');
  const gameOverMsg          = document.getElementById('gameOverMsg');
  const menuReturnBtn        = document.getElementById('menuReturnBtn');
  const qrContainer          = document.getElementById('qrContainer');
  const statsContainer       = document.getElementById('statsContainer');

  // Settings & Share
  const settingsOverlay      = document.getElementById('settingsOverlay');
  const closeSettingsBtn     = document.getElementById('closeSettingsBtn');
  const colorBlindToggle     = document.getElementById('colorBlindToggle');
  const soundSlider          = document.getElementById('soundSlider');
  const openShareOverlayBtn  = document.getElementById('openShareOverlayBtn');
  const shareOverlay         = document.getElementById('shareOverlay');
  const shareBox             = document.getElementById('shareBox');
  const shareTwitter         = document.getElementById('shareTwitter');
  const shareFacebook        = document.getElementById('shareFacebook');
  const shareReddit          = document.getElementById('shareReddit');
  const copyLink             = document.getElementById('copyLink');
  const closeShareBtn        = document.getElementById('closeShareBtn');

  // Audio
  const sndLoseLife          = document.getElementById('sndLoseLife');
  const sndHardcoreSelect    = document.getElementById('sndHardcoreSelect');
  const sndHighScore         = document.getElementById('sndHighScore');

  // Pause
  const pauseOverlay         = document.getElementById('pauseOverlay');
  const pauseEndGameBtn      = document.getElementById('pauseEndGameBtn');
  const doubleConfirmOverlay = document.getElementById('doubleConfirmOverlay');
  const confirmEndYes        = document.getElementById('confirmEndYes');
  const confirmEndNo         = document.getElementById('confirmEndNo');

  // Close static menu
  document.getElementById('closeMenu').addEventListener('click', () => {
    document.getElementById('staticMenu').style.display = 'none';
  });

  // SETTINGS
  closeSettingsBtn.addEventListener('click', () => {
    settingsOverlay.style.display = 'none';
  });
  soundSlider.addEventListener('input', () => {
    let vol = soundSlider.value / 100;
    sndLoseLife.volume = vol;
    sndHardcoreSelect.volume = vol;
    sndHighScore.volume = vol;
  });

  // SHARE
  const gameLink = "https://sites.google.com/view/staticquasar931/static-gmes/static-says";
  function getShareText() {
    let bestHigh = Math.max(
      gameStats.easy.highScore,
      gameStats.medium.highScore,
      gameStats.hardcore.highScore
    );
    return `Try to beat my high score of ${bestHigh} in Static Says!`;
  }
  shareTwitter.href  = `https://twitter.com/intent/tweet?text=${encodeURIComponent(getShareText())}&url=${encodeURIComponent(gameLink)}`;
  shareFacebook.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(gameLink)}&quote=${encodeURIComponent(getShareText())}`;
  shareReddit.href   = `https://reddit.com/submit?url=${encodeURIComponent(gameLink)}&title=${encodeURIComponent(getShareText())}`;
  copyLink.addEventListener('click', (e) => {
    e.preventDefault();
    if(navigator.clipboard) {
      navigator.clipboard.writeText(`${getShareText()} ${gameLink}`);
    }
  });
  closeShareBtn.addEventListener('click', () => {
    shareOverlay.style.display = 'none';
  });
  openShareOverlayBtn.addEventListener('click', () => {
    settingsOverlay.style.display = 'none';
    shareOverlay.style.display = 'flex';
  });
  statsContainer.addEventListener('click', () => {
    shareOverlay.style.display = 'flex';
  });

  // Overlays: close on outside click
  function clickOutsideToClose(overlay, content) {
    overlay.addEventListener('click', (e) => {
      if(e.target===overlay) {
        overlay.style.display='none';
      }
    });
  }
  clickOutsideToClose(settingsOverlay, settingsBox);
  clickOutsideToClose(shareOverlay, shareBox);

  // MAP SELECT
  map1Btn.addEventListener('click', () => {
    mainMenu.style.display = 'none';
    difficultyMenu.style.display = 'flex';
  });

  /********************************************************
    DIFFICULTY
  *********************************************************/
  let currentDifficulty = '';
  let lives = 0;
  let roundScore = 0;
  let currentHighScore = 0;
  let baseTimeLimit=9000;

  easyBtn.addEventListener('click', () => {
    currentDifficulty = 'easy';
    lives = 4;
    baseTimeLimit = 9000;  
    currentHighScore = gameStats.easy.highScore;
    showRulesOverlay("Easy Mode");
  });
  mediumBtn.addEventListener('click', () => {
    currentDifficulty = 'medium';
    lives = 2;
    baseTimeLimit = 6600;
    currentHighScore = gameStats.medium.highScore;
    showRulesOverlay("Medium Mode");
  });
  hardcoreBtn.addEventListener('click', () => {
    sndHardcoreSelect.currentTime=0; sndHardcoreSelect.play().catch(()=>{});
    currentDifficulty = 'hardcore';
    lives = 1;
    baseTimeLimit = 4500;
    currentHighScore = gameStats.hardcore.highScore;
    showRulesOverlay("Hardcore Mode");
  });

  function showRulesOverlay(msg) {
    difficultyMenu.style.display = 'none';
    gameArea.style.display = 'block';
    rulesOverlay.style.display = 'flex';
  }
  rulesOverlay.addEventListener('click', (e)=>{
    if(e.target===rulesOverlay) {
      rulesOverlay.style.display='none';
    }
  });
  startGameBtn.addEventListener('click',(e)=>{
    e.stopPropagation();
    startGame();
    rulesOverlay.style.display='none';
  });

  /********************************************************
    SHAPES
  *********************************************************/
  const shapeDefinitions = [
    { id:"shape1",  color:"red",     shapeType:"square",      hasNumber:"1",  locPhrase:"top-left corner" },
    { id:"shape2",  color:"blue",    shapeType:"circle",      hasNumber:"2" },
    { id:"shape3",  color:"black",   shapeType:"square",      hasNumber:"3" },
    { id:"shape4",  color:"orange",  shapeType:"circle",      hasNumber:"4" },
    { id:"shape5",  color:"pink",    shapeType:"square",      hasNumber:"5" },
    { id:"shape6",  color:"purple",  shapeType:"circle",      hasNumber:"6" },
    { id:"shape7",  color:"white",   shapeType:"square",      hasNumber:"7" },
    { id:"shape8",  color:"yellow",  shapeType:"square",      hasNumber:"8" },
    { id:"shape9",  color:"black",   shapeType:"circle",      hasNumber:"9" },
    { id:"shape10", color:"red",     shapeType:"bigCircle",   hasNumber:"10" },
    { id:"shape11", color:"pink",    shapeType:"circle",      hasNumber:"11" },
    { id:"shape12", color:"white",   shapeType:"smallCircle", hasNumber:"12" },
    { id:"shape13", color:"black",   shapeType:"smallCircle", hasNumber:"13" },
    { id:"shape14", color:"purple",  shapeType:"bigCircle",   hasNumber:"14" },
    { id:"shape15", color:"white",   shapeType:"square",      hasNumber:"15" },
    { id:"shape16", color:"pink",    shapeType:"square",      hasNumber:"16" },
    { id:"shape17", color:"red",     shapeType:"circle",      hasNumber:"17" },
    { id:"shape18", color:"orange",  shapeType:"circle",      hasNumber:"18" },
    { id:"shape19", color:"blue",    shapeType:"circle",      hasNumber:"19" },
    { id:"shape20", color:"black",   shapeType:"square",      hasNumber:"20" }
  ];

  /********************************************************
    GAME FLOW
  *********************************************************/
  let roundActive=false; 
  let paused=false;
  let timerID=null;
  let countdownInterval=null;
  let currentRound=0;
  let timeLimit=9000;
  let currentStaticSays = false; // for "No Action" button

  function startGame(){
    qrContainer.style.display='none';
    statsContainer.style.display='none';
    roundScore=0;
    currentRound=0;
    timeLimit=baseTimeLimit;
    paused=false;

    currentDifficultyEl.textContent=currentDifficulty.toUpperCase();
    livesCountEl.textContent=lives;
    roundScoreEl.textContent=roundScore;
    currHighScoreEl.textContent=currentHighScore;

    scoreHUD.style.display='block';
    inGameHUD.style.display='flex';
    noActionBtn.style.display='none';

    nextRound();
  }

  function nextRound(){
    roundActive=true;
    currentRound++;
    timeLimit=Math.max(baseTimeLimit-(currentRound*200),1500);

    let staticSays=(Math.random()<0.7);
    currentStaticSays = staticSays;
    noActionBtn.style.display='block';

    // Weighted commands
    let possibilities=["click","click","click","hover","click","quadrant"];
    let commandType= possibilities[Math.floor(Math.random()*possibilities.length)];
    if(currentRound<2 && commandType!=="click"){ 
      commandType="click"; 
    }

    // Possibly multi-step for "click"
    let multiStep=1;
    if(commandType==="click" && currentRound>=5 && Math.random()<0.4) multiStep=2;

    // Build sub-commands
    let subCommands=[];
    for(let i=0; i<multiStep; i++){
      let shapeObj = shapeDefinitions[Math.floor(Math.random()*shapeDefinitions.length)];
      let { text, validIDs } = buildSubCommandFromShape(shapeObj);
      subCommands.push({ text, validIDs, done:false });
    }

    // Combine text for multi-step
    let finalCommandText = (staticSays?"Static says: ":"");
    for(let i=0; i<subCommands.length; i++){
      if(i===0){
        finalCommandText += (commandType==="hover"?"hover over the ":"click on ")+subCommands[i].text;
      } else {
        finalCommandText += (i===subCommands.length-1) ? " then "+subCommands[i].text : ", then "+subCommands[i].text;
      }
    }

    // Command logic
    commandText.textContent=finalCommandText;

    // Timer
    startTimer();
    timerID=setTimeout(()=>{
      if(!roundActive)return;
      // If "Static says," user needed to do something => fail
      // If "doesn't say," doing nothing => success
      if(staticSays) finalizeRound(false);
      else finalizeRound(true);
    }, timeLimit);

    // If commandType==="hover" => we only have subCommands.length=1 in practice
    // We'll do a simpler approach:
    if(commandType==="hover"){
      let requiredIDs = subCommands[0].validIDs; // possibly multiple
      function mouseOverHandler(e){
        if(!roundActive||paused)return;
        let cid=e.target.id;
        if(requiredIDs.includes(cid)){
          // success if staticSays => yes
          finalizeRound(staticSays?true:false);
        } else if(!staticSays){
          finalizeRound(false);
        }
      }
      shapeDefinitions.forEach(s=>{
        let ref=document.getElementById(s.id);
        ref.addEventListener('mouseover', mouseOverHandler);
      });

      function finalizeRound(success){
        roundActive=false;
        cleanup();
        handleRoundEnd(success);
      }
      function cleanup(){
        clearTimeout(timerID);
        clearInterval(countdownInterval);
        shapeDefinitions.forEach(s=>{
          let ref=document.getElementById(s.id);
          ref.removeEventListener('mouseover', mouseOverHandler);
        });
        noActionBtn.style.display='none';
      }

    } else if(commandType==="quadrant"){
      // do nothing more here, the setTimeout handles success/fail
      // user can't do anything except "No Action" button
    } else if(commandType==="click"){
      // Multi-step subCommands array
      let subIndex=0;

      // user must click a shape in subCommands[subIndex].validIDs => next subIndex
      function clickHandler(e){
        if(!roundActive||paused)return;
        let cid=e.target.id;

        // If subCommands[subIndex].validIDs includes cid => success for that step
        if(subCommands[subIndex].validIDs.includes(cid)){
          subIndex++;
          if(subIndex>=subCommands.length){
            finalizeRound(true);
          }
        } else {
          // wrong shape => fail
          finalizeRound(false);
        }
      }
      shapeDefinitions.forEach(s=>{
        let ref=document.getElementById(s.id);
        ref.addEventListener('click', clickHandler);
      });

      function finalizeRound(success){
        roundActive=false;
        cleanup();
        handleRoundEnd(success);
      }
      function cleanup(){
        clearTimeout(timerID);
        clearInterval(countdownInterval);
        shapeDefinitions.forEach(s=>{
          let ref=document.getElementById(s.id);
          ref.removeEventListener('click', clickHandler);
        });
        noActionBtn.style.display='none';
      }
    }
  }

  // Build a sub-command: returns { text, validIDs }.
  // If we mention location or number, that's the *specific* shape.
  // If we skip location & number, any shape that matches color & shapeType is valid.
  function buildSubCommandFromShape(shapeObj){
    let colorLabel = shapeObj.color;
    let shapeLabel = "";
    if(shapeObj.shapeType==="bigCircle") shapeLabel="big circle";
    else if(shapeObj.shapeType==="smallCircle") shapeLabel="small circle";
    else shapeLabel=shapeObj.shapeType;

    let textParts = [colorLabel, shapeLabel];
    let validIDs=[];

    // Decide if we mention # or location
    let mentionNumber = (Math.random()>0.7); // 30% chance
    let mentionLocation = (Math.random()>0.5 && shapeObj.locPhrase); // 50% chance if shapeObj has locPhrase

    if(mentionNumber){
      textParts.push(`with the number ${shapeObj.hasNumber}`);
    }
    if(mentionLocation){
      textParts.push(`in the ${shapeObj.locPhrase}`);
    }

    let textDesc = textParts.join(" ");

    // Now build validIDs set:
    // If we mention number => it must match color, shapeType, AND that number
    // If we mention location => it must match that exact shape ID
    // If we mention neither => any shape that matches color & shapeType is valid
    if(mentionLocation){
      // exact shape only
      validIDs = [shapeObj.id];
    } else if(mentionNumber){
      // must match color, shapeType, hasNumber
      validIDs = shapeDefinitions
        .filter(s=> s.color===shapeObj.color && s.shapeType===shapeObj.shapeType && s.hasNumber===shapeObj.hasNumber)
        .map(s=> s.id);
    } else {
      // no number, no location => match color & shapeType
      validIDs = shapeDefinitions
        .filter(s=> s.color===shapeObj.color && s.shapeType===shapeObj.shapeType)
        .map(s=> s.id);
    }

    return { text: textDesc, validIDs };
  }

  // "No Action" Button logic => if "Static says," immediate fail, else immediate success
  noActionBtn.addEventListener('click', ()=>{
    if(!roundActive||paused) return;
    finalizeNoActionClick(!currentStaticSays);
  });
  function finalizeNoActionClick(success){
    roundActive=false;
    clearTimeout(timerID);
    clearInterval(countdownInterval);
    noActionBtn.style.display='none';
    handleRoundEnd(success);
  }

  function startTimer(){
    let tSec=Math.ceil(timeLimit/1000);
    timeLeftEl.textContent = tSec+"s";
    let timeRem=tSec;
    countdownInterval=setInterval(()=>{
      if(!paused){
        timeRem--;
        if(timeRem<=0){
          timeRem=0;
          clearInterval(countdownInterval);
        }
        timeLeftEl.textContent = timeRem+"s";
      }
    },1000);
  }

  // MOUSE QUADRANT
  let mouseX=0, mouseY=0;
  function getMouseQuadrant(){
    let rect=gameArea.getBoundingClientRect();
    let midX=rect.width/2, midY=rect.height/2;
    let xPos=mouseX - rect.left;
    let yPos=mouseY - rect.top;
    if(xPos<midX && yPos<midY) return "top-left";
    if(xPos>=midX && yPos<midY) return "top-right";
    if(xPos<midX && yPos>=midY) return "bottom-left";
    return "bottom-right";
  }
  gameArea.addEventListener('mousemove',(e)=>{
    mouseX=e.clientX; 
    mouseY=e.clientY;
  });

  /********************************************************
    HANDLE ROUND END
  *********************************************************/
  function handleRoundEnd(success){
    if(success){
      roundScore++;
      gameStats.totalRounds++;
      gameStats[currentDifficulty].roundsPlayed++;
    } else {
      lives--;
      // 0.1s flash
      gameArea.classList.add('lifeLossFlash');
      setTimeout(()=>{ gameArea.classList.remove('lifeLossFlash'); },100);

      sndLoseLife.currentTime=0; 
      sndLoseLife.play().catch(()=>{});
      // shimmer lives
      livesCountEl.classList.add('lifeShimmer');
      setTimeout(()=>{ livesCountEl.classList.remove('lifeShimmer'); },800);
    }
    updateStatsUI();
    saveStatsToLocal();

    roundScoreEl.textContent=roundScore;
    livesCountEl.textContent=lives;

    if(lives<=0) endGame();
    else nextRound();
  }

  /********************************************************
    END GAME
  *********************************************************/
  function endGame(){
    roundActive=false;
    clearTimeout(timerID);
    clearInterval(countdownInterval);
    noActionBtn.style.display='none';

    if(roundScore>currentHighScore){
      currentHighScore=roundScore;
      gameStats[currentDifficulty].highScore=roundScore;
      sndHighScore.currentTime=0; 
      sndHighScore.play().catch(()=>{});
      saveStatsToLocal();
    }
    gameOverMsg.textContent="Your Score: "+roundScore;
    gameOverOverlay.style.display='flex';
  }
  menuReturnBtn.addEventListener('click',()=>{
    gameOverOverlay.style.display='none';
    gameArea.style.display='none';
    mainMenu.style.display='flex';
    qrContainer.style.display='block';
    statsContainer.style.display='block';
    updateStatsUI();
  });

  /********************************************************
    PAUSE
  *********************************************************/
  pauseOverlay.addEventListener('click',(e)=>{
    if(e.target===pauseOverlay) {
      togglePause(false);
    }
  });
  function togglePause(forceEnd){
    if(!roundActive) return;
    paused=!paused;
    pauseOverlay.style.display= paused? 'flex':'none';
    commandText.style.visibility= paused? 'hidden':'visible';

    if(forceEnd===true){
      endGame();
      return;
    }
    if(!paused){
      // resume
      let leftover=parseInt(timeLeftEl.textContent)||0;
      timerID=setTimeout(()=>{
        if(!roundActive)return;
        handleRoundEnd(false);
      }, leftover*1000);
    } else {
      clearTimeout(timerID);
    }
  }
  window.addEventListener('keydown',(e)=>{
    if(!roundActive) return;
    if(e.key==='Escape' || e.key===' '){
      e.preventDefault();
      togglePause();
    }
  });

  pauseEndGameBtn.addEventListener('click',()=>{
    doubleConfirmOverlay.style.display='flex';
  });
  confirmEndYes.addEventListener('click',()=>{
    togglePause(true);
  });
  confirmEndNo.addEventListener('click',()=>{
    doubleConfirmOverlay.style.display='none';
  });
  </script>
</body>
</html>
